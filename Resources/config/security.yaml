parameters:
    darvin_user.security.authenticate_user_event_subscriber.class: Darvin\UserBundle\EventListener\AuthenticateUserSubscriber

    darvin_user.security.form.factory.class: Darvin\UserBundle\Form\Factory\SecurityFormFactory

    darvin_user.security.form.handler.class: Darvin\UserBundle\Form\Handler\SecurityFormHandler

    darvin_user.security.form.renderer.class: Darvin\UserBundle\Form\Renderer\SecurityFormRenderer

    darvin_user.security.oauth.darvin_auth_user_provider.class: Darvin\UserBundle\Security\OAuth\DarvinAuthUserProvider

    darvin_user.security.twig_extension.class: Darvin\UserBundle\Twig\Extension\SecurityExtension

    darvin_user.security.update_password_event_subscriber.class: Darvin\UserBundle\EventListener\UpdatePasswordSubscriber

    darvin_user.security.user_authenticator.class: Darvin\UserBundle\Security\UserAuthenticator

    darvin_user.security.user_provider.class: Darvin\UserBundle\Security\UserProvider

services:
    _defaults:
        public: true

    darvin_user.security.authenticate_user_event_subscriber:
        class: '%darvin_user.security.authenticate_user_event_subscriber.class%'
        arguments:
            - '@darvin_user.security.user_authenticator'
            - '%darvin_user.public_firewall_name%'
        tags:
            - { name: kernel.event_subscriber }

    darvin_user.security.form.factory:
        class: '%darvin_user.security.form.factory.class%'
        arguments:
            - '@security.authentication_utils'
            - '@form.factory'
            - '@router'
            - '@translator'
            - '@darvin_user.user.factory'
            - '%kernel.secret%'
            - '%darvin_user.user_class%'

    darvin_user.security.form.handler:
        class: '%darvin_user.security.form.handler.class%'
        arguments:
            - '@doctrine.orm.entity_manager'
            - '@event_dispatcher'
            - '@darvin_utils.flash.notifier'
            - '@darvin_user.role.configuration'
            - '@darvin_user.security.user_authenticator'
            - '%darvin_user.public_firewall_name%'

    darvin_user.security.form.renderer:
        class: '%darvin_user.security.form.renderer.class%'
        arguments:
            - '@darvin_user.security.form.factory'
            - '@darvin_utils.templating.provider'

    darvin_user.security.oauth.darvin_auth_user_provider:
        class: '%darvin_user.security.oauth.darvin_auth_user_provider.class%'
        arguments:
            - '@doctrine.orm.entity_manager'
            - '@security.token_storage'
            - '@darvin_user.user.factory'
            - '@darvin_user.user.repository'

    darvin_user.security.twig_extension:
        class:  '%darvin_user.security.twig_extension.class%'
        public: false
        arguments:
            - '@darvin_user.security.form.factory'
            - '@darvin_user.security.form.renderer'
        tags:
            - { name: twig.extension }

    darvin_user.security.update_password_event_subscriber:
        class:  '%darvin_user.security.update_password_event_subscriber.class%'
        public: false
        arguments:
            - '@darvin_user.user.manager'
        tags:
            - { name: doctrine.event_subscriber }

    darvin_user.security.user_authenticator:
        class: '%darvin_user.security.user_authenticator.class%'
        arguments:
            - '@security.token_storage'

    darvin_user.security.user_provider:
        public: false
        class:  '%darvin_user.security.user_provider.class%'
        arguments:
            - '@darvin_user.user.repository'
